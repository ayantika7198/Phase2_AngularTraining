{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Category } from './product';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/productService\";\nimport * as i2 from \"src/app/shared/logging.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"../star/star-icon.component\";\nimport * as i7 from \"../appnav/appnav.component\";\nfunction ProductListComponent_tr_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 12);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_tr_34_Template_td_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.print(product_r1));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 12);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_tr_34_Template_td_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.productSelected(product_r1));\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"uppercase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelement(10, \"img\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\")(14, \"app-star-icon\", 14);\n    i0.ɵɵlistener(\"ratingClicked\", function ProductListComponent_tr_34_Template_app_star_icon_ratingClicked_14_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onRatingClicked($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"td\")(16, \"input\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_tr_34_Template_input_ngModelChange_16_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(product_r1.quantity = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"td\")(18, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_tr_34_Template_button_click_18_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.onClick(product_r1));\n    });\n    i0.ɵɵtext(19, \"ADD\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r1.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 8, product_r1.name));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(8, 10, product_r1.price, \"INR\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"src\", product_r1.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r1.category);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"rating\", product_r1.rating)(\"message\", ctx_r0.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", product_r1.quantity);\n  }\n}\nexport class ProductListComponent {\n  constructor(productService, loggingService, router) {\n    this.productService = productService;\n    this.loggingService = loggingService;\n    this.router = router;\n    this.name = '';\n    this.products = [];\n    this.filteredProducts = [];\n    this.href = '';\n    this.OnProductSelection = new EventEmitter();\n    this._filCats = \"\";\n    this.title = \"\";\n    //products:IProduct[]=this.productService.getProducts();\n    this.pr = this.products[0];\n    this.map = new Map();\n    this.productClicked = new EventEmitter();\n  }\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n  ngOnInit() {\n    this.href = this.router.url;\n    this.sub = this.productService.getProducts().subscribe(response => {\n      for (let res of response) {\n        let cat = res.category.indexOf(\".\");\n        let str = res.category.substring(cat + 1);\n        let value;\n        //console.log(str);\n        //res.category=response.enumValue.toString();\n        //console.log(res.category);\n        // console.log(Category.shirt);\n        // console.log(Category[res.category]);\n        switch (str) {\n          case 'jeans':\n            value = Category.jeans;\n            break;\n          case 'grocery':\n            value = Category.grocery;\n            break;\n          case 'shirt':\n            value = Category.shirt;\n            break;\n          case 'top':\n            value = Category.top;\n            break;\n          case 'food':\n            value = Category.food;\n            break;\n        }\n        res.category = value;\n      }\n      this.products = response;\n      this.filteredProducts = this.products;\n    }, err => {\n      console.log(err);\n    });\n    //this.filteredProducts=this.products;\n    this.productService.selectedProductChanges$.subscribe(currentProduct => {\n      this.selectedProduct = currentProduct;\n      console.log(this.selectedProduct);\n    });\n  }\n  //filteredProducts:IProduct[]=[];\n  showProducts() {\n    this.loggingService.print(this.filteredProducts);\n  }\n  print(product) {\n    console.log(product);\n  }\n  newProduct() {\n    console.log('in new product');\n    this.productService.changeSelectedProduct(this.productService.newProduct());\n    console.log('back to newProduct from service ');\n    this.router.navigate([this.href, 'addProduct']);\n  }\n  get filCats() {\n    return this._filCats;\n  }\n  set filCats(val) {\n    this._filCats = val;\n    this.filteredProducts = this.filterData(val);\n  }\n  filterData(val) {\n    val = this.filCats;\n    return this.products.filter(prot => prot.category.includes(val));\n  }\n  onRatingClicked(msg) {\n    this.title = 'Called: ' + msg;\n  }\n  //pros:any='';\n  productSelected(product) {\n    this.productService.changeSelectedProduct(product);\n  }\n  onClick(prot) {\n    //this.pros.push()\n    this.productClicked.emit(prot);\n  }\n}\nProductListComponent.ɵfac = function ProductListComponent_Factory(t) {\n  return new (t || ProductListComponent)(i0.ɵɵdirectiveInject(i1.productService), i0.ɵɵdirectiveInject(i2.LoggingService), i0.ɵɵdirectiveInject(i3.Router));\n};\nProductListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductListComponent,\n  selectors: [[\"product-list\"]],\n  outputs: {\n    OnProductSelection: \"OnProductSelection\",\n    productClicked: \"productClicked\"\n  },\n  decls: 38,\n  vars: 3,\n  consts: [[1, \"card\"], [1, \"card-header\"], [1, \"btn\", \"btn-primary\", \"btn2\", 3, \"click\"], [1, \"input-group\", \"mb-3\"], [1, \"input-group-prepend\"], [\"id\", \"inputGroup-sizing-default\", 1, \"input-group-text\"], [\"type\", \"text\", \"aria-label\", \"Sizing example input\", \"aria-describedby\", \"inputGroup-sizing-default\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"card-body\"], [1, \"table\", \"table-striped\", \"table-hover\", \"table-dark\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [3, \"click\"], [\"width\", \"50px\", \"height\", \"50px\", 3, \"src\"], [3, \"rating\", \"message\", \"ratingClicked\"], [\"type\", \"number\", \"min\", \"0\", \"value\", \"0\", 3, \"ngModel\", \"ngModelChange\"]],\n  template: function ProductListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"appnav\");\n      i0.ɵɵelementStart(1, \"html\");\n      i0.ɵɵelement(2, \"head\");\n      i0.ɵɵelementStart(3, \"body\")(4, \"div\", 0)(5, \"div\", 1)(6, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function ProductListComponent_Template_button_click_6_listener() {\n        return ctx.showProducts();\n      });\n      i0.ɵɵtext(7, \"SHOW\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(8);\n      i0.ɵɵelementStart(9, \"div\", 3)(10, \"div\", 4)(11, \"span\", 5);\n      i0.ɵɵtext(12, \"Filter By Category\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.filCats = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(14, \"div\", 7)(15, \"table\", 8)(16, \"thead\")(17, \"tr\")(18, \"th\", 9);\n      i0.ɵɵtext(19, \"ID\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"th\", 9);\n      i0.ɵɵtext(21, \"NAME\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"th\", 9);\n      i0.ɵɵtext(23, \"PRICE\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"th\", 9);\n      i0.ɵɵtext(25, \"IMAGE\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"th\", 9);\n      i0.ɵɵtext(27, \"CATEGORY\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"th\", 9);\n      i0.ɵɵtext(29, \"RATING\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"th\", 9);\n      i0.ɵɵtext(31, \"QUANTITY\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(32, \"th\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(33, \"tbody\");\n      i0.ɵɵtemplate(34, ProductListComponent_tr_34_Template, 20, 13, \"tr\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(35, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function ProductListComponent_Template_button_click_35_listener() {\n        return ctx.newProduct();\n      });\n      i0.ɵɵtext(36, \"Add New Product\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(37, \"router-outlet\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate1(\" \", ctx.title, \" \");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.filCats);\n      i0.ɵɵadvance(21);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filteredProducts);\n    }\n  },\n  dependencies: [i4.NgForOf, i3.RouterOutlet, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.MinValidator, i5.NgModel, i6.StarIconComponent, i7.AppnavComponent, i4.UpperCasePipe, i4.CurrencyPipe],\n  styles: [\"input[type=number][_ngcontent-%COMP%]{\\r\\n    width: 50px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZHVjdHMvcHJvZHVjdC1saXN0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxXQUFXO0FBQ2YiLCJzb3VyY2VzQ29udGVudCI6WyJpbnB1dFt0eXBlPW51bWJlcl17XHJcbiAgICB3aWR0aDogNTBweDtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["EventEmitter","Category","i0","ProductListComponent","constructor","productService","loggingService","router","products","Map","ngOnDestroy","sub","unsubscribe","ngOnInit","href","url","getProducts","subscribe","response","res","cat","category","indexOf","str","substring","value","jeans","grocery","shirt","top","food","filteredProducts","err","console","log","selectedProductChanges$","currentProduct","selectedProduct","showProducts","print","product","newProduct","changeSelectedProduct","navigate","filCats","_filCats","val","filterData","filter","prot","includes","onRatingClicked","msg","title","productSelected","onClick","productClicked","emit","selectors","outputs","OnProductSelection","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\Phase2\\demoApp\\src\\app\\products\\product-list.component.ts","D:\\Phase2\\demoApp\\src\\app\\products\\product-list.component.html"],"sourcesContent":["import { Component, EventEmitter, OnChanges, OnDestroy, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { LoggingService } from 'src/app/shared/logging.service';\nimport { productService } from 'src/app/shared/productService';\nimport { Category, IProduct } from './product';\n\n@Component({\n  selector: 'product-list',\n  templateUrl: './product-list.component.html',\n  styleUrls: ['./product-list.component.css']\n})\nexport class ProductListComponent implements OnInit,OnDestroy{\n\n  name:string='';\n\n  sub!:Subscription;\n\n  products:IProduct[]=[];\n  filteredProducts:IProduct[]=[];\n  selectedProduct!:IProduct | null;\n  href:string='';\n\n  @Output() OnProductSelection:EventEmitter<IProduct>=new EventEmitter<IProduct>();\n\n  constructor(private productService:productService,\n    private loggingService:LoggingService, private router:Router){}\n  ngOnDestroy(): void {\n    this.sub.unsubscribe();\n  }\n  \n  ngOnInit(): void {\n    this.href=this.router.url;\n\n    this.sub=this.productService.getProducts().subscribe(\n      (response)=>{\n        for(let res of response){\n          let cat=res.category.indexOf(\".\");\n          let str=res.category.substring(cat+1);\n          let value!:Category;\n          //console.log(str);\n          //res.category=response.enumValue.toString();\n          //console.log(res.category);\n         // console.log(Category.shirt);\n         // console.log(Category[res.category]);\n\n         switch(str){\n           case 'jeans':\n             value=Category.jeans;\n             break;\n            case 'grocery':\n              value=Category.grocery;\n              break;\n            case 'shirt':\n              value=Category.shirt;\n              break;\n            case 'top':\n              value=Category.top;\n              break;\n            case 'food':\n              value=Category.food;\n              break;\n         }\n\n\n          res.category=value;\n        }\n        this.products=response;\n        this.filteredProducts=this.products;\n        \n      },\n      (err)=>{\n        console.log(err);\n      }\n    )\n    //this.filteredProducts=this.products;\n\n    this.productService.selectedProductChanges$.\n       subscribe(currentProduct=>{this.selectedProduct=currentProduct;\n       console.log(this.selectedProduct);\n       });\n  }\n\n  //filteredProducts:IProduct[]=[];\n\n  showProducts():void{\n    this.loggingService.print(this.filteredProducts);\n  }\nselectedP!:IProduct|null;\n  print(product:IProduct):void{\n    \n    console.log(product);\n  }\nnewP!:IProduct;\n\n\n  newProduct():void{\n  \n    console.log('in new product');\n\n  this.productService.changeSelectedProduct(this.productService.newProduct());\n  console.log('back to newProduct from service ');\n\n   this.router.navigate([this.href,'addProduct']);\n  }\n\n  \n\n\n\n  _filCats:string=\"\";\n  title:string=\"\";\n\n  get filCats():string{\n    return  this._filCats;\n}\n\nset filCats(val:string){\n\n this._filCats=val;\n\n this.filteredProducts=this.filterData(val);\n \n}\n\n  \n\n  //products:IProduct[]=this.productService.getProducts();\n\n  \n\n  pr:IProduct=this.products[0];\n\n\n\n\n  filterData(val:string):IProduct[]{\n    val=this.filCats;\n    return this.products.filter((prot:IProduct)=>prot.category.includes(val));\n  \n  \n  \n  }\n\n  onRatingClicked(msg:string):void{\n    this.title='Called: ' +msg;\n  }\n\n  map=new Map();\n  @Output() productClicked:EventEmitter<IProduct> =new EventEmitter<IProduct>();\n\n  //pros:any='';\n\n  productSelected(product:IProduct):void{\n    this.productService.changeSelectedProduct(product);\n   }\n\n  onClick(prot:IProduct):void{\n    //this.pros.push()\n\n    this.productClicked.emit(prot);\n  }\n}\n","<appnav></appnav>\n\n<html>\n\n    <head></head>\n    <body>\n\n        <div class=\"card\">\n            <div class=\"card-header\">\n              <button class=\"btn btn-primary btn2\" (click)=\"showProducts()\">SHOW</button>\n              {{title}}\n                <div class=\"input-group mb-3\">\n                    <div class=\"input-group-prepend\">\n                      <span class=\"input-group-text\" id=\"inputGroup-sizing-default\">Filter By Category</span>\n                    </div>\n                    <input type=\"text\" class=\"form-control\" [(ngModel)]=\"filCats\" aria-label=\"Sizing example input\" aria-describedby=\"inputGroup-sizing-default\">\n                  </div>\n             \n            </div>\n            <div class=\"card-body\">\n                <table class=\"table table-striped table-hover table-dark\">\n                    <thead>\n                      <tr>\n                        <th scope=\"col\">ID</th>\n                        <th scope=\"col\">NAME</th>\n                        <th scope=\"col\">PRICE</th>\n                        <th scope=\"col\">IMAGE</th>\n                        <th scope=\"col\">CATEGORY</th>\n                        <th scope=\"col\">RATING</th>\n                        <th scope=\"col\">QUANTITY</th>\n                        <th scope=\"col\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                        <tr *ngFor=\"let product of filteredProducts\">\n                        \n                            <td (click)=\"print(product)\">{{product.id}}</td>\n                            <td (click)=\"productSelected(product)\">{{product.name | uppercase}}</td>\n                            <td>{{product.price | currency:'INR'}}</td>\n                            <td><img src=\"{{product.imageUrl}}\" width=\"50px\" height=\"50px\"/></td>\n                            <td>{{product.category}}</td>\n                            <td><app-star-icon [rating]='product.rating' [message]='name' (ratingClicked)=\"onRatingClicked($event)\"></app-star-icon></td>\n                            <td><input type=\"number\" min=0 value=\"0\" [(ngModel)]=\"product.quantity\"/></td>\n                            <td><button class=\"btn btn-primary\" (click)=\"onClick(product)\">ADD</button></td>\n                          </tr>\n                      \n                    </tbody>\n                  </table>\n                  <button class=\"btn btn-primary\" (click)=\"newProduct()\">Add New Product</button>\n            </div>\n          </div>\n\n          <router-outlet></router-outlet>\n    </body>\n</html>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}